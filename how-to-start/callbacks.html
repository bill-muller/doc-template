<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-how-to-start/callbacks" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Колбеки | Project Name Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://bill-muller.github.io/doc-template/how-to-start/callbacks"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Колбеки | Project Name Docs"><meta data-rh="true" name="description" content="Опис для розділу &quot;Колбеки&quot;"><meta data-rh="true" property="og:description" content="Опис для розділу &quot;Колбеки&quot;"><link data-rh="true" rel="icon" href="/doc-template/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://bill-muller.github.io/doc-template/how-to-start/callbacks"><link data-rh="true" rel="alternate" href="https://bill-muller.github.io/doc-template/how-to-start/callbacks" hreflang="en"><link data-rh="true" rel="alternate" href="https://bill-muller.github.io/doc-template/how-to-start/callbacks" hreflang="x-default"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orestbida/cookieconsent@3.0.1/dist/cookieconsent.css"><link rel="stylesheet" href="/doc-template/assets/css/styles.990f7271.css">
<script src="/doc-template/assets/js/runtime~main.97b7dca8.js" defer="defer"></script>
<script src="/doc-template/assets/js/main.6082ce85.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/doc-template/"><div class="navbar__logo"><img src="/doc-template/img/logo.svg" alt="Project Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/doc-template/img/logo.svg" alt="Project Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Документація</b></a><a aria-current="page" class="navbar__item navbar__link navbar-item-with-icon navbar__link--active" data-icon="home" href="/doc-template/"><span class="iconLabelWrapper_VNNx"><span></span><span>Головна</span></span></a><a href="https://hub4merchant.notion.site/knowledge-hub" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar-item-with-icon" data-icon="dashboard"><span class="iconLabelWrapper_VNNx"><span></span><span>Кабінет мерчанта</span></span></a><a href="https://hub4merchant.notion.site/knowledge-hub" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar-item-with-icon" data-icon="changelog"><span class="iconLabelWrapper_VNNx"><span></span><span>Що нового</span></span></a><a href="https://hub4merchant.notion.site/knowledge-hub" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar-item-with-icon" data-icon="knowledge"><span class="iconLabelWrapper_VNNx"><span></span><span>База знань</span></span><svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://hub4merchant.notion.site/knowledge-hub" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar-item-with-icon" data-icon="site"><span class="iconLabelWrapper_VNNx"><span></span><span>Стати клієнтом</span></span><svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><div class="sidebarItemContainer_szoF"><div class="sidebarItemContent_uDy3"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doc-template/">Головна</a></li></div></div><div class="sidebarItemContainer_szoF"><div class="sidebarItemContent_uDy3"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/doc-template/how-to-start/overview">З чого почати</a><button aria-label="Collapse sidebar category &#x27;З чого почати&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><div class="sidebarItemContainer_szoF"><div class="sidebarItemContent_uDy3"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/doc-template/how-to-start/integration-types/overview">Типи інтеграцій</a><button aria-label="Collapse sidebar category &#x27;Типи інтеграцій&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><div class="sidebarItemContainer_szoF"><div class="sidebarItemContent_uDy3"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/doc-template/how-to-start/integration-types/host-to-host">Host to Host</a></li></div></div><div class="sidebarItemContainer_szoF"><div class="sidebarItemContent_uDy3"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/doc-template/how-to-start/integration-types/hosted-payment-page">Hosted Payment Page</a></li></div></div><div class="sidebarItemContainer_szoF"><div class="sidebarItemContent_uDy3"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/doc-template/how-to-start/integration-types/dashboard">Dashbord</a></li></div></div></ul></li></div></div><div class="sidebarItemContainer_szoF"><div class="sidebarItemContent_uDy3"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/doc-template/how-to-start/credentials/overview">Облікові дані</a><button aria-label="Collapse sidebar category &#x27;Облікові дані&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><div class="sidebarItemContainer_szoF"><div class="sidebarItemContent_uDy3"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/doc-template/how-to-start/credentials/test-credentials">Тестування</a></li></div></div><div class="sidebarItemContainer_szoF"><div class="sidebarItemContent_uDy3"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/doc-template/how-to-start/credentials/prod-credentials">Продакшн</a></li></div></div></ul></li></div></div><div class="sidebarItemContainer_szoF"><div class="sidebarItemContent_uDy3"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/doc-template/how-to-start/api-request-format">Формат запиту</a></li></div></div><div class="sidebarItemContainer_szoF"><div class="sidebarItemContent_uDy3"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/doc-template/how-to-start/api-answer-format">Формат відповіді</a></li></div></div><div class="sidebarItemContainer_szoF"><div class="sidebarItemContent_uDy3"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/doc-template/how-to-start/callbacks">Колбеки</a></li></div></div></ul></li></div></div><div class="sidebarItemContainer_szoF"><div class="sidebarItemContent_uDy3"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/doc-template/category/довідники">Довідники</a><button aria-label="Expand sidebar category &#x27;Довідники&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></div></div><div class="sidebarItemContainer_szoF"><div class="sidebarItemContent_uDy3"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/doc-template/category/api-роути">API роути</a><button aria-label="Expand sidebar category &#x27;API роути&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></div></div><div class="sidebarItemContainer_szoF"><div class="sidebarItemContent_uDy3"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/doc-template/services/overview">Платіжні методи</a><button aria-label="Collapse sidebar category &#x27;Платіжні методи&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><div class="sidebarItemContainer_szoF"><div class="sidebarItemContent_uDy3"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/doc-template/category/африка">Африка</a><button aria-label="Expand sidebar category &#x27;Африка&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></div></div><div class="sidebarItemContainer_szoF"><div class="sidebarItemContent_uDy3"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/doc-template/category/азія">Азія</a><button aria-label="Expand sidebar category &#x27;Азія&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></div></div><div class="sidebarItemContainer_szoF"><div class="sidebarItemContent_uDy3"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/doc-template/category/європа">Європа</a><button aria-label="Expand sidebar category &#x27;Європа&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></div></div><div class="sidebarItemContainer_szoF"><div class="sidebarItemContent_uDy3"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/doc-template/services/fiat/latina/overview">Латинська Америка</a><button aria-label="Expand sidebar category &#x27;Латинська Америка&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></div></div><div class="sidebarItemContainer_szoF"><div class="sidebarItemContent_uDy3"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/doc-template/category/снд">СНД</a><button aria-label="Expand sidebar category &#x27;СНД&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></div></div><div class="sidebarItemContainer_szoF"><div class="sidebarItemContent_uDy3"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/doc-template/category/інші-країни">Інші країни</a><button aria-label="Expand sidebar category &#x27;Інші країни&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></div></div><div class="sidebarItemContainer_szoF"><div class="sidebarItemContent_uDy3"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/doc-template/services/world-wide/overview">Весь світ</a><button aria-label="Expand sidebar category &#x27;Весь світ&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></div></div></ul></li></div></div></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/doc-template/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/doc-template/how-to-start/overview"><span itemprop="name">З чого почати</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Колбеки</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Колбеки</h1></header>
<p>Механізм колбеків використовується для надсилання повідомлень мерчанту від платіжного шлюзу  для інформування про події, які виникли під час обробки транзакції. Колбеки містять всю актуальну інформацію про транзакцію, включаючи суму та статус транзакції, а також унікальний ідентифікатор, який дозволяє мерчанту ідентифікувати транзакцію.</p>
<p>Щоб почати отримувати колбеки, мерчанту необхідно передати нам адресу, на яку їх потрібно надсилати. Можливі варіанти передачі адреси детально описані в розділі <a href="#%D0%BF%D0%B5%D1%80%D0%B5%D0%B4%D0%B0%D1%87%D0%B0-callback_url"><strong>Передача callback_url</strong></a>.</p>
<p>Платіжний шлюз  виконує <strong>HTTP</strong> запит методом <span class="green-text"><strong>POST</strong></span> на передану мерчантом адресу та містить у собі всю актуальну інформацію про транзакцію. Кожен запит підписується алгоритмом <strong>HMAC-SHA256</strong> для підвищення рівня безпеки, тому при отриманні колбеків мерчант може перевіряти їх на достовірність (детал ьніше в розділі <a href="#%D0%BF%D1%96%D0%B4%D0%BF%D0%B8%D1%81"><strong>Підпис</strong></a>). Якщо перевірка підпису неможлива, для безпечнішої обробки платежів налаштуйте отримання колбеків тільки з нашої IP адреси, яку можна отримати у менеджера .</p>
<p>Доставлення колбека вважається успішним, якщо мерчант повернув відповідь зі статусом <span class="green-text"><strong>200</strong></span>. Вміст відповіді не має значення та краще залишити його порожнім.</p>
<p>Також ми маємо можливість відправлення колбеків методом <span class="red-text"><strong>GET</strong></span>. Деталі з використання розташовані на сторінці <a href="/doc-template/how-to-start/callbacks_get.md"><strong>Колбеки (GET)</strong></a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="передача-callback_url">Передача callback_url<a href="#передача-callback_url" class="hash-link" aria-label="Direct link to Передача callback_url" title="Direct link to Передача callback_url">​</a></h2>
<p>Щоб почати отримувати колбеки, мерчанту необхідно передати нам адресу, на яку їх потрібно надсилати. Передати адресу можна один раз менеджеру  або передавати в кожному запиті на створення транзакції.</p>
<p>При передачі адреси менеджеру  колбеки будуть налаштовані в параметрах точки мерчанта на нашому боці, після цього передавати адресу в запиті на створення тр анзакції не потрібно.</p>
<p>Для передачі адреси при створенні транзакції, в запиті передавайте параметр <strong><code>callback_url</code></strong> (див. методи API <a href="/doc-template/how-to-start/api/transaction_create.md"><strong>/transaction/create</strong></a> та <a href="/doc-template/how-to-start/api/transaction_pay.md"><strong>/transaction/pay</strong></a>). Якщо параметр <strong><code>callback_url</code></strong> не буде передано, колбек буде відправлено згідно з налаштуваннями точки мерчанта на нашому боці.</p>
<p>⚠️<!-- --> Значення передане в запиті на створення транзакції має більший пріоритет ніж значення, встановлене в параметрах точки мерчанта</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_Ktv7">Приклад</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token property">&quot;point&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       </span><span class="token property">&quot;callback_url&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;https://your.server.callback.url&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>При створенні транзакції, всі URL, надіслані мерчантом, проходять валідацію. Мерчант отримає помилку валідації з кодом <a href="/doc-template/how-to-start/reference/api_error_codes.md"><strong>204 (Validation failed)</strong></a> у наступних випадках:</p>
<ul>
<li>Передано порожній callback_url;</li>
<li>Переданий в callback_url домен не існує;</li>
<li>Відсутній DNS запис;</li>
<li>IP веде на localhost, або в приватну мережу (10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16).</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="типове-використання">Типове використання<a href="#типове-використання" class="hash-link" aria-label="Direct link to Типове використання" title="Direct link to Типове використання">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="отримання-транзакцією-фінального-ста тусу">Отримання транзакцією фінального статусу<a href="#отримання-транзакцією-фінального-статусу" class="hash-link" aria-label="Direct link to Отримання транзакцією фінального статусу" title="Direct link to Отримання транзакцією фінального статусу">​</a></h3>
<p>Колбек буде відправлено на <a href="#%D0%BF%D0%B5%D1%80%D0%B5%D0%B4%D0%B0%D1%87%D0%B0-callback_url"><strong>callback_url</strong></a> після отримання транзакцією фінального статусу (див. <a href="/doc-template/how-to-start/reference/transaction_statuses.md"><strong>Довідник статусів</strong></a>).</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="реверс-транзакції">Реверс транзакції<a href="#реверс-транзакції" class="hash-link" aria-label="Direct link to Реверс транзакції" title="Direct link to Реверс транзакції">​</a></h3>
<p>Колбек буде відправлено на <a href="#%D0%BF%D0%B5%D1%80%D0%B5%D0%B4%D0%B0%D1%87%D0%B0-callback_url"><strong>callback_url</strong></a> після зміни фінального статусу <strong><code>1 (SUCCESS)</code></strong> на фінальний статус <strong><code>4 (REVERSED)</code></strong>, якщо мерчант зробив повернення успішного платежу (див. <a href="/doc-template/how-to-start/reference/transaction_statuses.md"><strong>Довідник статусів</strong></a>).</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="повторна-оплата-без-створення-транзакції-мерчантом">Повторна оплата без створення транзакції мерчантом<a href="#повторна-оплата-без-створення-транзакції-мерчантом" class="hash-link" aria-label="Direct link to Повторна оплата без створення транзакції мерчантом" title="Direct link to Повторна оплата без створення транзакції мерчантом">​</a></h3>
<p>Клієнт може здійснити депозит на платіжні реквізити мерчанта, які були отримані під час попередньої оплати, при цьому клієнт не створить відповідну заявку в інтерфейсі мерчанта. В такому разі мерчант не отримає інформацію про надходження коштів, що призведе до неможливості їх зарахування.</p>
<p>У таких випадках ми самостійно створюємо транзакцію в нашій системі та надсилаємо мерчанту колбек на <strong><code>callback_url</code></strong>, налаштований на нашій стороні для точки мерчанта.</p>
<div class="danger-notification"><div class="danger-icon"><img class="icon" src="/icons/danger.svg"></div><div class="text"><p> Відправлення колбеків в такому випадку можливе тільки при наступних умовах: </p><ul><li>Мерчант може приймати та обробляти такі типи колбеків</li> <li>Платіжний метод підтримує створення транзакції після оплати</li></ul> <p></p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="зміна-фінального-статусу-транзакції">Зміна фінального статусу транзакції<a href="#зміна-фінального-статусу-транзакції" class="hash-link" aria-label="Direct link to Зміна фінального статусу транзакції" title="Direct link to Зміна фінального статусу транзакції">​</a></h3>
<p>Деякі платіжні методи передбачають зміну статусу транзакції з неуспішного фінального статусу <strong><code>2 (FAILED)</code></strong>, <strong><code>3 (CANCELLED)</code></strong> або <strong><code>5 (EXPIRED)</code></strong> на успішний статус <strong><code>1 (SUCCESS)</code></strong>.</p>
<p>Для зміни статусу транзакції мерчанту необхідно звернутись до технічної підтримки, надавши квитанцію або чек, які підтверджують оплату. Платіжний шлюз  відправить мерчанту колбек про зміну статусу транзакції на <strong><code>callback_url</code></strong>, переданий нам.</p>
<p>Також при зміні статусу транзакції можлива зміна суми транзакції у випадках, якщо фактично сплачена клієнтом сума відрізняється від суми, вказаної при створенні транзакції. В таких випадках транзакція може отримати фінальний статус (див. <a href="/doc-template/how-to-start/reference/transaction_statuses.md"><strong>Довідник статусів</strong></a>) з іншою сумою, тому необхідно завжди перевіряти поле <strong><code>amount</code></strong> в отриманому колбеку.</p>
<div class="danger-notification"><div class="danger-icon"><img class="icon" src="/icons/danger.svg"></div><div class="text"><p> Зміна фінального статусу та суми можлива тільки для неуспішних транзакцій, та підтримується не усіма платіжним и методами </p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="підпис">Підпис<a href="#підпис" class="hash-link" aria-label="Direct link to Підпис" title="Direct link to Підпис">​</a></h2>
<p>В заголовках <strong>HTTP-запитів</strong>, якими відправляються колбеки, міститься підпис необхідний для валідації колбека мерчантом. Для формування підпису використовується алгоритм <strong>HMAC-SHA256</strong>, в якому в якості <strong><code>secret</code></strong> використовується <strong><code>api_token</code></strong> точки мерчанта. Мерчант при отриманні колбеків проводить валідацію заголовків запиту, після чого, ґрунтуючись на результатах перевірки, приймає рішення про обробку колбеків.</p>
<div class="language-kotlin codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_Ktv7">Приклад валідації підпису в заголовках запиту</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-kotlin codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> hmac</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> hashlib</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> time</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">def </span><span class="token function" style="color:rgb(130, 170, 255)">validate_signature</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">request</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> api_token</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string-literal multiline string" style="color:rgb(195, 232, 141)">&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token string-literal multiline string" style="color:rgb(195, 232, 141)">    Validate the signature from the request headers</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token string-literal multiline string" style="color:rgb(195, 232, 141)">    </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token string-literal multiline string" style="color:rgb(195, 232, 141)">    Args:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token string-literal multiline string" style="color:rgb(195, 232, 141)">        request: The request object containing headers</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token string-literal multiline string" style="color:rgb(195, 232, 141)">        api_token: Merchant&#x27;s API token</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token string-literal multiline string" style="color:rgb(195, 232, 141)">        </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token string-literal multiline string" style="color:rgb(195, 232, 141)">    Returns:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token string-literal multiline string" style="color:rgb(195, 232, 141)">        bool: True if signature is valid, False otherwise</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token string-literal multiline string" style="color:rgb(195, 232, 141)">    &quot;&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    # Get headers</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    timestamp </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> request</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">headers</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">get</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">&#x27;X</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">Timestamp&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    received_signature </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> request</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">headers</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">get</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">&#x27;X</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">Signature&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    # Validate that required headers exist</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> not timestamp </span><span class="token operator" style="color:rgb(137, 221, 255)">or</span><span class="token plain"> not received_signature</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> False</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    # Optional</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> Check </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> timestamp </span><span class="token keyword" style="font-style:italic">is</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">recent</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">e</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">g</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> within </span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token plain"> minutes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    # </span><span class="token keyword" style="font-style:italic">to</span><span class="token plain"> prevent replay attacks</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    current_time </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">int</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">time</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">time</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    timestamp_int </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">int</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">timestamp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">abs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">current_time </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain"> timestamp_int</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">300</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">  # </span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token plain"> minutes</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> False</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    # Recreate the signature string</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    signature_string </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> f</span><span class="token string-literal singleline string" style="color:rgb(195, 232, 141)">&quot;{request.body.decode(&#x27;utf-8&#x27;)}{timestamp}&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    # Calculate expected signature</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    expected_signature </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> hmac</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">new</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        api_token</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">encode</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        signature_string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">encode</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        hashlib</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">sha256</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">hexdigest</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> received_signature </span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token plain"> expected_signature</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="warning-notification"><div class="warning-icon"><img class="icon" src="/icons/warning.svg"></div><div class="text"><p> Якщо перевірка підпису неможлива, для безпечнішої обробки платежів налаштуйте отримання колбеків тільки з нашої IP адреси, яку можна отримати у менеджера  </p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="параметри-колбека">Параметри колбека<a href="#параметри-колбека" class="hash-link" aria-label="Direct link to Параметри колбека" title="Direct link to Параметри колбека">​</a></h2>
<p>Колбеки відправлені за допомогою <span class="green-text"><strong>POST</strong></span> методу містять всю актуальну ін формацію про транзакцію, яка ідентична відповіді на запит <a href="/doc-template/how-to-start/api/transaction_find.md"><strong>/transaction/find</strong></a>.</p>
<table><thead><tr><th>Ім&#x27;я</th><th style="text-align:center">Тип</th><th>Опис</th></tr></thead><tbody><tr><td><strong>account_id</strong></td><td style="text-align:center">integer</td><td>Ідентифікатор облікового запису мерчанта у платіжному шлюзі</td></tr><tr><td><strong>account_wallet_amount</strong></td><td style="text-align:center">integer</td><td>Сума поповнення гаманця мерчанта, помножена на 100. Залежить від переданого <strong>amount</strong> та налаштувань комісії <br> <!-- -->⚠️<!-- --> Деякі валюти можуть не містити десяткової частини, звертайте на це увагу в документації платіжного методу <p class="validation"> Формат: позитивне ціле число без десяткових знаків <br> Приклад: <br> <strong><code>5000.00 USD</code></strong> передається як <strong><code>500000</code></strong> (5000.00 x 100 = 500000) <br> <strong><code>1534.20 USD</code></strong> передається як <strong><code>153420</code></strong> (1534.20 x 100 = 153420) </p></td></tr><tr><td><strong>account_wallet_currency</strong></td><td style="text-align:center">string</td><td>Валюта гаманця мерчанта <p class="validation"> Формат: код фіатної валюти у стандарті <a href="/doc-template/how-to-start/reference/currency_codes.md"><strong>ISO 4217</strong></a> або код криптовалюти згідно з <a href="/doc-template/how-to-start/reference/crypto_codes.md"><strong>довідником</strong></a> <br> Приклад: <strong><code>USD</code></strong>, <strong><code>UAH</code></strong>, <strong><code>USDT</code></strong>, <strong><code>USDC</code></strong> </p></td></tr><tr><td><strong>amount</strong></td><td style="text-align:center">integer</td><td>Сума платежу помножена на 100 <br> <!-- -->⚠️<!-- --> Деякі валюти можуть не містити десяткової частини, звертайте на це увагу в документації платіжного методу <p class="validation"> Формат: позитивне ціле число без десяткових знаків <br> Приклад: <br> <strong><code>5000.00 USD</code></strong> передається як <strong><code>500000</code></strong> (5000.00 x 100 = 500000) <br> <strong><code>1534.20 USD</code></strong> передається як <strong><code>153420</code></strong> (1534.20 x 100 = 153420) </p></td></tr><tr><td><strong>amount_currency</strong></td><td style="text-align:center">string</td><td>Валюта платежу <p class="validation"> Формат: код фіатної валюти у стандарті <a href="/doc-template/how-to-start/reference/currency_codes.md"><strong>ISO 4217</strong></a> або код криптовалюти згідно з <a href="/doc-template/how-to-start/reference/crypto_codes.md"><strong>довідником</strong></a> <br> Приклад: <strong><code>USD</code></strong>, <strong><code>UAH</code></strong>, <strong><code>USDT</code></strong>, <strong><code>USDC</code></strong> </p></td></tr><tr><td><strong>created_at</strong></td><td style="text-align:center">string</td><td>Дата та час створення платежу (таймзона Європа/Київ) <p class="validation"> Формат: <strong><code>YYYY-MM-DD HH24:MI:SS</code></strong> <br> Приклад: <strong><code>2025-03-18 13:49:44</code></strong> </p></td></tr><tr><td><strong>description</strong></td><td style="text-align:center">string</td><td>Опис призначення платежу</td></tr><tr><td><strong>external_customer_id</strong></td><td style="text-align:center">string</td><td>Ідентифікатор клієнта в системі мерчанта</td></tr><tr><td><strong>external_order_id</strong></td><td style="text-align:center">string</td><td>Ідентифікатор замовлення у системі мерчанта</td></tr><tr><td><strong>external_transaction_id</strong></td><td style="text-align:center">string</td><td>Ідентифікатор транзакції у системі мерчанта</td></tr><tr><td><strong>extra</strong></td><td style="text-align:center">object</td><td>Додаткові атрибути платежу, передані під час його створення</td></tr><tr><td><strong>failure_reason_code</strong></td><td style="text-align:center">integer</td><td>Код причини відмови. Повертається у разі неуспішного статусу транзакції (див. <a href="/doc-template/how-to-start/reference/failure_reason_codes.md"><strong>Довідник кодів відмови</strong></a>)</td></tr><tr><td><strong>failure_reason_message</strong></td><td style="text-align:center">string</td><td>Опис коду причини відмови. Повертається у разі неуспішного статусу транзакції</td></tr><tr><td><strong>id</strong></td><td style="text-align:center">integer</td><td>Ідентифікатор створеної транзакції у платіжному шлюзі</td></tr><tr><td><strong>is_test</strong></td><td style="text-align:center">boolean</td><td>Параметр, який повідомляє про те, чи є транзакція тестовою. Автоматично проставляється для всіх транзакцій, створених з використанням тестового облікового запису мерчанта</td></tr><tr><td><strong>point_id</strong></td><td style="text-align:center">integer</td><td>Ідентифікатор точки приймання платежів</td></tr><tr><td><strong>service_id</strong></td><td style="text-align:center">integer</td><td>Ідентифікатор послуги платіжного шлюзу</td></tr><tr><td><strong>status</strong></td><td style="text-align:center">integer</td><td>Статус транзакції (див. <a href="/doc-template/how-to-start/reference/transaction_statuses.md"><strong>Довідник статусів</strong></a>)</td></tr><tr><td><strong>status_description</strong></td><td style="text-align:center">string</td><td>Опис статусу платежу</td></tr><tr><td><strong>wallet_id</strong></td><td style="text-align:center">integer</td><td>Ідентифікатор гаманця мерчанта у платіжному шлюзі</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="приклад-колбека">Приклад колбека<a href="#приклад-колбека" class="hash-link" aria-label="Direct link to Приклад колбека" title="Direct link to Приклад колбека">​</a></h2>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;account_id&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">123</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;account_wallet_amount&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">500000</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;account_wallet_currency&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;USD&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;amount&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">500000</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;amount_currency&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;USD&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;created_at&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;2025-03-18 13:49:44&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;description&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Test payment&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;external_customer_id&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;123&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;external_order_id&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;100&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;external_transaction_id&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;1234567890&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;extra&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;failure_reason_code&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token null keyword" style="font-style:italic">null</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;failure_reason_message&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;id&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1234567890</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;is_test&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;point_id&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">111</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;service_id&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">123</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;status&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;status_description&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;wallet_id&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">123</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="повторне-відправлення">Повторне відправлення<a href="#повторне-відправлення" class="hash-link" aria-label="Direct link to Повторне відправлення" title="Direct link to Повторне відправлення">​</a></h2>
<p>Якщо не вдалося відправити запит на <strong><code>callback_url</code></strong> або не було отримано підтвердження отримання колбека, то будуть здійснюватися повторні спроби відправлення колбека до отримання статусу <span class="green-text"><strong>200</strong></span>.</p>
<p>Повторне відправлення колбеків відбувається наступним чином:</p>
<ol><li>Автоматичне перевідправлення колбеків з інтервалами, які збільшуються з кожною спробою:</li><ul><li>1 – 3 спроба: 10 секунд</li><li>4 – 5 спроба: 5 хвилин</li><li>6 – 8 спроба: 15 хвилин</li><li>9 – 16 спроба: 1 година</li><li>24 години для останньої спроби</li></ul><p>Якщо остання спроба перевідправлення була неуспішною та пройшло понад 24 годин після першої спроби, то повторних спроб автоматичного доставлення колбека не буде, тоді мерчанту необхідно самостійно ініціювати повторне відправлення колбека
</p><li>Мерчант може самостійно перевідправляти колбеки за окремими транзакціями в особистому кабінеті</li>
<li>Для масового перевідправлення колбеків мерчант може звернутись до технічної підтримки </li><p></p></ol>
<div class="warning-notification"><div class="warning-icon"><img class="icon" src="/icons/warning.svg"></div><div class="text"><p> У рідкісних випадках між повторними відправленнями колбеків інформація може змінюватися. Наприклад, якщо змінюється статус транзакції, то всі наступні колбеки будуть містити інформацію про новий статус </p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="обробка-колбеків">Обробка колбеків<a href="#обробка-колбеків" class="hash-link" aria-label="Direct link to Обробка колбеків" title="Direct link to Обробка колбеків">​</a></h2>
<p>При отриманні запиту на <strong><code>callback_url</code></strong> мерчанту необхідно відповісти кодом <span class="green-text"><strong>200</strong></span>. Вміст відповіді не має значення та краще залишити його порожнім. Доставлення колбека вважається успішним, якщо мерчант повернув відповідь зі статусом <span class="green-text"><strong>200</strong></span>.</p>
<p>Якщо мерчант не налаштував отримання колбеків тільки з нашої IP адреси, тоді необхідно при отриманні колбеків проводити валідацію заголовків запиту, підписаних алгоритмом <strong>HMAC-SHA256</strong> (див. розділ <a href="#%D0%BF%D1%96%D0%B4%D0%BF%D0%B8%D1%81"><strong>Підпис</strong></a>).</p>
<div class="danger-notification"><div class="danger-icon"><img class="icon" src="/icons/danger.svg"></div><div class="text"><p> Приймати рішення про успішність чи неуспішність виконання транзакції можна лише ґрунтуючись на значенні параметра <strong><code>status</code></strong> </p></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/doc-template/how-to-start/api-answer-format"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Формат відповіді</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/doc-template/category/довідники"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Довідники</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#передача-callback_url" class="table-of-contents__link toc-highlight">Передача callback_url</a></li><li><a href="#типове-використання" class="table-of-contents__link toc-highlight">Типове використання</a><ul><li><a href="#отримання-транзакцією-фінального-статусу" class="table-of-contents__link toc-highlight">Отримання транзакцією фінального статусу</a></li><li><a href="#реверс-транзакції" class="table-of-contents__link toc-highlight">Реверс транзакції</a></li><li><a href="#повторна-оплата-без-створення-транзакції-мерчантом" class="table-of-contents__link toc-highlight">Повторна оплата без створення транзакції мерчантом</a></li><li><a href="#зміна-фінального-статусу-транзакції" class="table-of-contents__link toc-highlight">Зміна фінального статусу транзакції</a></li></ul></li><li><a href="#підпис" class="table-of-contents__link toc-highlight">Підпис</a></li><li><a href="#параметри-колбека" class="table-of-contents__link toc-highlight">Параметри колбека</a></li><li><a href="#приклад-колбека" class="table-of-contents__link toc-highlight">Приклад колбека</a></li><li><a href="#повторне-відправлення" class="table-of-contents__link toc-highlight">Повторне відправлення</a></li><li><a href="#обробка-колбеків" class="table-of-contents__link toc-highlight">Обробка колбеків</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"></div></footer></div>
</body>
</html>